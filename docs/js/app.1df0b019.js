(function(e){function t(t){for(var a,o,r=t[0],l=t[1],_=t[2],d=0,u=[];d<r.length;d++)o=r[d],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);c&&c(t);while(u.length)u.shift()();return n.push.apply(n,_||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],a=!0,r=1;r<s.length;r++){var l=s[r];0!==i[l]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var a={},i={app:0},n=[];function o(t){if(a[t])return a[t].exports;var s=a[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=a,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(s,a,function(t){return e[t]}.bind(null,a));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/crypto-portfolio/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var _=0;_<r.length;_++)t(r[_]);var c=l;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0a3b":function(e,t,s){},"10a0":function(e,t,s){},"13ad":function(e,t,s){"use strict";s("10a0")},"2a58":function(e,t,s){"use strict";s("c392")},3146:function(e){e.exports=JSON.parse('{"switch_chart":"チャート表示切り替え","tag":"タグ","asset":"トークン","wallet":"ウォレット","size":"サイズ","price":"価格","price_changes":"変化率%","notional_value":"価値","entry":"エントリー","pnl":"利益と損失","pnl_return":"リターン","note":"メモ","total_unrealized_pnl":"未実現損益合計","today_pnl":"今日の利益と損失","today_pnl_error_msg":"全てのアセットタイプが表示されている場合のみ有効な PnL です","update_time":"更新時刻","save":"保存","saved":"完了！","sec_ago":"秒前","date":"日付","nav":"純資産価値","nav_page":"純資産価値","diff":"日次利益と損失","estimate_total_cost":"総コスト見積り","export_as_csv":"CSV でエクスポート","7d":"7 日","30d":"30 日","90d":"90 日","180d":"180 日","365d":"365 日","all":"全歷史","positions_count":"ポジション数","symbol":"シンボル","position_notional":"評価額","mark_price":"マークプライス","initial_size":"初期サイズ","unrealized_pnl":"損益","total_initial_size":"総初期サイズ","total_position_size":"総価値","dark_mode":"ダークモード","hide_small_balance":"小額残高を非表示 (純資産価値の 0.1% 未満）","show_return_in_small_device":"小型デバイスでリターン（%）を表示","is_merge_wallets":"パイチャートで同じコインのウォレットを統合する","is_show_nav_title":"「総資産」をウェブページのタイトルに表示する","language":"言語切り替え","timeframe":"価格変動に使用される時間枠","asset_type":"表示するアセットタイプ"}')},"56d7":function(e,t,s){"use strict";s.r(t);var a=s("2b0e"),i=s("a925"),n=s("003c"),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Main")],1)},r=[],l=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"main"}},[t("div",{attrs:{id:"quick-access"}},[t("button",{staticClass:"setting-btn",on:{click:function(t){e.is_setting_mode=!e.is_setting_mode}}},[t("i",{staticClass:"fas fa-fw fa-cog"})]),t("div",{staticStyle:{display:"flex"}},[t("button",{directives:[{name:"show",rawName:"v-show",value:!e.is_nav_mode&&!e.is_position_mode,expression:"!is_nav_mode && !is_position_mode"}],staticClass:"setting-btn",on:{click:function(t){e.is_exchange_chart=!e.is_exchange_chart}}},[t("i",{staticClass:"fas fa-fw fa-chart-pie"})]),t("div",{staticStyle:{width:"20px"}}),t("button",{staticClass:"setting-btn",on:{click:function(t){e.is_position_mode=!e.is_position_mode,e.is_nav_mode=!1}}},[t("i",{staticClass:"fas fa-fw fa-scroll"})]),t("button",{staticClass:"setting-btn",on:{click:function(t){e.is_nav_mode=!e.is_nav_mode,e.is_position_mode=!1}}},[t("i",{staticClass:"fas fa-fw fa-chart-line"})])])]),t("setting",{attrs:{is_setting_mode:e.is_setting_mode,is_dark_mode:e.is_dark_mode,is_hide_small_balance:e.is_hide_small_balance,is_perfer_return:e.is_perfer_return,is_merge_wallets:e.is_merge_wallets,is_show_nav_title:e.is_show_nav_title,language:e.language,timeframe:e.timeframe,asset_type:e.asset_type},on:{"update:is_setting_mode":function(t){e.is_setting_mode=t},"update:is_dark_mode":function(t){e.is_dark_mode=t},"update:is_hide_small_balance":function(t){e.is_hide_small_balance=t},"update:is_perfer_return":function(t){e.is_perfer_return=t},"update:is_merge_wallets":function(t){e.is_merge_wallets=t},"update:is_show_nav_title":function(t){e.is_show_nav_title=t},"update:language":function(t){e.language=t},"update:timeframe":function(t){e.timeframe=t},"update:asset_type":function(t){e.asset_type=t}}}),e.is_nav_mode?t("account-value",{attrs:{daily_nav:e.daily_nav,estimate_total_cost:e.estimate_total_cost}}):e._e(),e.is_position_mode?t("position-view",{attrs:{positions:e.positions}}):e._e(),e.is_nav_mode||e.is_position_mode?e._e():t("div",[t("pie-chart",{attrs:{assets:e.chart_data}}),t("ul",e._l(e.assets,(function(s){return t("li",{directives:[{name:"show",rawName:"v-show",value:"APP_ERROR"==s.asset,expression:"asset.asset == 'APP_ERROR'"}],key:s.asset+s.wallet,staticClass:"sell"},[e._v(" "+e._s(s.wallet)+" KEY ERROR ")])})),0),t("table",{attrs:{id:"asset"}},[t("tr",[e.should_show("tag")?t("th",{on:{click:function(t){return e.change_sortkey("tag")}}},[e._v(" "+e._s(e.sorted_icon("tag"))+e._s(e.$t("tag"))+" ")]):e._e(),e.should_show("wallet")?t("th",{on:{click:function(t){return e.change_sortkey("wallet")}}},[e._v(" "+e._s(e.sorted_icon("wallet"))+e._s(e.$t("wallet"))+" ")]):e._e(),t("th",{on:{click:function(t){return e.change_sortkey("asset")}}},[e._v(" "+e._s(e.sorted_icon("asset"))+e._s(e.$t("asset"))+" ")]),e.should_show("price_changes")?t("th",{on:{click:function(t){return e.change_sortkey("price_changes")}}},[e._v(" "+e._s(e.sorted_icon("price_changes"))+e._s(e.timeframe)+" "+e._s(e.$t("price_changes"))+" ")]):e._e(),t("th",{on:{click:function(t){return e.change_sortkey("price")}}},[e._v(" "+e._s(e.sorted_icon("price"))+e._s(e.$t("price"))+" ")]),t("th",{on:{click:function(t){return e.change_sortkey("entry")}}},[e._v(" "+e._s(e.sorted_icon("entry"))+e._s(e.$t("entry"))+" ")]),t("th",{on:{click:function(t){return e.change_sortkey("size")}}},[e._v(" "+e._s(e.sorted_icon("size"))+e._s(e.$t("size"))+" ")]),t("th",{on:{click:function(t){return e.change_sortkey("notional_value")}}},[e._v(" "+e._s(e.sorted_icon("notional_value"))+e._s(e.$t("notional_value"))+" ")]),e.should_show("pnl")?t("th",{on:{click:function(t){return e.change_sortkey("pnl")}}},[e._v(" "+e._s(e.sorted_icon("pnl"))+e._s(e.$t("pnl"))+" ")]):e._e(),e.should_show("pnl_return")?t("th",{on:{click:function(t){return e.change_sortkey("pnl_return")}}},[e._v(" "+e._s(e.sorted_icon("pnl_return"))+e._s(e.$t("pnl_return"))+" ")]):e._e(),e.screen_width>500?t("th",[e._v(e._s(e.$t("note")))]):e._e()]),e._l(e.assets_table,(function(s){return t("tr",{directives:[{name:"show",rawName:"v-show",value:"APP_ERROR"!=s.asset&&(!e.is_hide_small_balance||s.size*s.price>e.small_balance_threshold),expression:"asset.asset != 'APP_ERROR' && (!is_hide_small_balance || asset.size * asset.price > small_balance_threshold)"}],key:s.asset+s.wallet},[e.should_show("tag")?t("td",{staticClass:"btn-tag",style:e.tagcolor(e.userdata[e.symbol_key(s.asset,s.wallet,"tag")]),on:{click:function(t){e.change_tag(e.symbol_key(s.asset,s.wallet,"tag"))}}},[e._v(" "+e._s(void 0!==e.userdata[e.symbol_key(s.asset,s.wallet,"tag")]?e.userdata[e.symbol_key(s.asset,s.wallet,"tag")]+1:"")+" ")]):e._e(),e.should_show("wallet")?t("td",[e._v(e._s(s.wallet))]):e._e(),t("td",[e._v(e._s(s.asset))]),e.should_show("price_changes")?t("td",{class:e.color(s.price_changes),staticStyle:{width:"0px"}},[e._v(" "+e._s(e._f("Precentage")(s.price_changes,1))+" ")]):e._e(),t("td",[e._v(e._s(e._f("toPrecision")(s.price,5)))]),t("td",{staticClass:"entry-price"},[t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.userdata[e.entry_k(s.asset,s.wallet)],expression:"userdata[entry_k(asset.asset, asset.wallet)]",modifiers:{lazy:!0}}],attrs:{type:"number"},domProps:{value:e.userdata[e.entry_k(s.asset,s.wallet)]},on:{change:function(t){e.$set(e.userdata,e.entry_k(s.asset,s.wallet),t.target.value)}}})]),t("td",{directives:[{name:"tooltip",rawName:"v-tooltip",value:s.size.toString(),expression:"asset.size.toString()"}]},[e._v(" "+e._s(e._f("nFormatter")(s.size,3))+" ")]),t("td",[e._v(e._s(e._f("Number")(s.notional_value,0)))]),e.should_show("pnl")?t("td",{class:e.color(s.pnl)},[e._v(" "+e._s(e._f("Number")(s.pnl,0))+" ")]):e._e(),e.should_show("pnl_return")?t("td",{class:e.color(s.pnl)},[e._v(" "+e._s(e._f("Precentage")(s.pnl_return,1))+" ")]):e._e(),e.screen_width>500?t("td",{staticClass:"entry-price",staticStyle:{"max-width":"200px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userdata[e.symbol_key(s.asset,s.wallet,"note")],expression:"userdata[symbol_key(asset.asset, asset.wallet, 'note')]"}],domProps:{value:e.userdata[e.symbol_key(s.asset,s.wallet,"note")]},on:{input:function(t){t.target.composing||e.$set(e.userdata,e.symbol_key(s.asset,s.wallet,"note"),t.target.value)}}})]):e._e()])}))],2),t("footer",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("ul",{staticStyle:{"list-style":"none","padding-left":"0"}},[t("li",[e._v(" "+e._s(e.$t("total_unrealized_pnl"))+": "),t("span",{class:e.color(e.sum_pnl(e.assets_table))},[e._v(" "+e._s(e._f("Number")(e.sum_pnl(e.assets_table),0))+" ")])]),t("li",[e._v(" "+e._s(e.$t("today_pnl"))+": "),"all"===e.asset_type?t("span",{class:e.color(e.today_pnl())},[e._v(" "+e._s(e._f("Number")(e.today_pnl(),0))+" ")]):e._e(),"all"!==e.asset_type?t("span",[e._v(" "+e._s(e.$t("today_pnl_error_msg"))+" ")]):e._e()]),t("li",[e._v(" "+e._s(e.$t("estimate_total_cost"))+": "),t("span",[e._v(" "+e._s(e._f("Number")(e.estimate_total_cost,0))+" ")])]),t("li",[t("Timer",{attrs:{time:e.time}})],1)]),t("button",{staticClass:"save",on:{click:e.save}},[e._v(" "+e._s(e.saved?e.$t("saved"):e.$t("save"))+" ")])])],1)],1)},_=[],c=(s("88a7"),s("271a"),s("5494"),s("13d5"),s("5716"),s("be6f")),d=function(){var e=this,t=e._self._c;return t("highcharts",{staticStyle:{height:"400px",width:"500"},attrs:{id:"pie",options:e.chartOptions}})},u=[],p=s("d180"),h=s.n(p),m=s("93c6"),f=s.n(m),v=s("4452"),g={name:"PieChart",props:{assets:Array},components:{highcharts:v["Chart"]},data(){return{dragging:!1,chart_size:null,startAngle:0,startAngleOffset:0}},computed:{nav:function(){return h()(this.assets.map(({value:e})=>e))},chartOptions:function(){return{accessibility:{enabled:!1},chart:{type:"pie",animation:!1},plotOptions:{pie:{size:"80%",innerSize:"80%",dataLabels:{distance:"2%",alignTo:"toPlotEdges",filter:{property:"percentage",operator:">",value:5},overflow:"allow",crop:!0}},series:{animation:{duration:500}}},title:{verticalAlign:"middle",floating:!0,text:"Total<br>$"+new Intl.NumberFormat("en-US",{maximumFractionDigits:0,minimumFractionDigits:0}).format(this.nav)},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b><br><b>${point.y:.0f}</b>"},series:[{name:"",colorByPoint:!0,startAngle:this.startAngle,data:f()(this.assets,"value","desc").map(e=>[e.name,e.value])}]}}},methods:{getDegree(e){const t=e.offsetX?e.offsetX:e.touches[0].clientX,s=e.offsetY?e.offsetY:e.touches[0].clientY,[a,i]=this.chart_size,n=[a/2-t,i/2-s],o=Math.atan2(n[1],n[0]);return 57.29*o%360},startDrag(e){this.dragging=!0;const t=this.getDegree(e);this.startAngleOffset=this.startAngle-t},stopDrag(){this.dragging=!1},doDrag(e){if(this.dragging){const t=this.getDegree(e);this.startAngle=t+this.startAngleOffset}e.preventDefault(),e.stopImmediatePropagation()}},mounted(){const e=document.getElementById("pie");this.chart_size=[e.offsetWidth,e.offsetHeight],window.addEventListener("touchend",this.stopDrag,{passive:!1}),window.addEventListener("mouseup",this.stopDrag,{passive:!1}),e.addEventListener("mousedown",this.startDrag,{passive:!1}),e.addEventListener("mousemove",this.doDrag,{passive:!1}),e.addEventListener("touchstart",this.startDrag,{passive:!1}),e.addEventListener("touchmove",this.doDrag,{passive:!1})}},b=g,y=s("2877"),w=Object(y["a"])(b,d,u,!1,null,"0701d88d",null),k=w.exports,x=function(){var e=this,t=e._self._c;return t("div",[t("highcharts",{staticStyle:{height:"300px",width:"500"},attrs:{id:"account-nav",options:e.chartOptions}}),t("div",{staticClass:"flex-container"},[t("div",e._l(e.timeframes,(function(s){return t("button",{key:s.value,class:{selected:e.timeframe===s.value},on:{click:function(t){return e.pick_range(s.value)}}},[e._v(" "+e._s(e.$t(s.label))+" ")])})),0),t("export-table",{attrs:{table_id:"nav-table"}})],1),t("table",{attrs:{id:"nav-table"}},[t("tr",[t("th",[e._v(e._s(e.$t("date")))]),t("th",[e._v(e._s(e.$t("nav")))]),t("th",[e._v(e._s(e.$t("diff")))])]),e._l(e.reversed_data,(function(s,a){return t("tr",{key:s[0]},[t("td",[e._v(e._s(s[0]))]),t("td",[e._v("$ "+e._s(e._f("Number")(s[1],0)))]),t("td",{class:e.color(e.dail_pnl(a))},[e._v(" "+e._s(e._f("Number")(e.dail_pnl(a),0))+" ")])])}))],2)],1)},z=[];s("14d9");function S(e,t=","){const s=document.querySelectorAll("table#"+e+" tr"),a=[];for(let r=0;r<s.length;r++){const e=[],i=s[r].querySelectorAll("td, th");for(let t=0;t<i.length;t++){let s=i[t].innerText.replace(/(\r\n|\n|\r)/gm,"").replace(/(\s\s)/gm," ");s=s.replace(/"/g,'""'),s=s.replace(/[,$]/g,""),e.push('"'+s+'"')}a.push(e.join(t))}const i=a.join("\n"),n=e+"_"+(new Date).getTime()+".csv",o=document.createElement("a");o.style.display="none",o.setAttribute("target","_blank"),o.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(i)),o.setAttribute("download",n),document.body.appendChild(o),o.click(),document.body.removeChild(o)}function P(e){const t=Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e);return"$ "+t}const $={toFixed:(e,t=2)=>void 0==e?0:e.toFixed(t),toPrecision:(e,t)=>void 0==e||Math.abs(e)<1e-8?0:e.toPrecision(t),Number:(e,t)=>{if(void 0==e)return 0;const s="number"===typeof t?{maximumFractionDigits:t,minimumFractionDigits:t}:{};return new Intl.NumberFormat("en-US",s).format(e)},Precentage:(e,t=1)=>e===1/0?"Inf%":isNaN(e)?"--":(100*e||0).toFixed(t)+"%",nFormatter:(e,t)=>{const s=[{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e8,symbol:"B"}],a=/\.0+$|(\.[0-9]*[1-9])0+$/,i=s.slice().reverse().find((function(t){return e>=t.value}));return i?(e/i.value).toFixed(t-1).replace(a,"$1")+i.symbol:e.toFixed(t)}},O={color(e){return{buy:e>0,sell:e<0}}};var C=function(){var e=this,t=e._self._c;return t("button",{on:{click:e.download}},[e._v(e._s(e.$t("export_as_csv")))])},N=[],j={name:"ExportTable",props:{table_id:String},computed:{},methods:{download(){S(this.table_id)}},mounted(){}},A=j,E=Object(y["a"])(A,C,N,!1,null,"6ccc5614",null),R=E.exports,D=s("80f6"),T=s.n(D),F=s("1723"),M=s.n(F),V={name:"AccountValue",props:{daily_nav:Array,estimate_total_cost:Number},components:{highcharts:v["Chart"],ExportTable:R},data(){return{timeframe:30,timeframes:[{label:"7d",value:7},{label:"30d",value:30},{label:"90d",value:90},{label:"180d",value:180},{label:"365d",value:365},{label:"all",value:void 0}]}},filters:$,computed:{reversed_data:function(){return this.daily_nav.slice().reverse().slice(0,this.timeframe)},chartOptions:function(){return{accessibility:{enabled:!1},chart:{type:"area",animation:!1},legend:{enabled:!1},title:{text:this.$i18n.t("nav_page")},plotOptions:{areaspline:{threshold:null},series:{animation:{duration:500},marker:{radius:0},fillOpacity:0,dataLabels:{enabled:!0,verticalAlign:"top",y:-20,formatter:function(){if(this.y===this.series.dataMax)return P(this.y)}}}},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%d %b %Y"},labels:{rotation:0,format:"{value:%m-%d}"}},yAxis:{min:T()(this.reversed_data,e=>e[1])[1],max:M()(this.reversed_data,e=>e[1])[1],title:{enabled:!1},labels:{formatter:function(){return P(this.value)},style:{fontSize:9}}},tooltip:{pointFormat:"<b>${point.y:.0f}</b>"},series:[{name:this.$i18n.t("nav"),background:"#00f",fillOpacity:.3,data:this.daily_nav.map(e=>{const[t,s,a]=e[0].split("-");return[Date.UTC(t,+s-1,a),e[1]]}).slice(-this.timeframe)}]}}},methods:{...O,dail_pnl(e){return this.reversed_data[e][1]-this.reversed_data[Math.min(e+1,this.reversed_data.length-1)][1]},pick_range(e){this.timeframe=e}},mounted(){}},L=V,I=(s("2a58"),s("5d18"),Object(y["a"])(L,x,z,!1,null,"7cc8e4b4",null)),B=I.exports,J=function(){var e=this,t=e._self._c;return t("div",[t("footer",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("ul",{staticStyle:{"list-style":"none","padding-left":"0"}},[t("li",[e._v(e._s(e.$t("positions_count"))+": "+e._s(e.positions.length))]),t("li",[e._v(e._s(e.$t("total_initial_size"))+": "+e._s(e._f("Number")(e.total_initial_size,0)))]),t("li",[e._v(e._s(e.$t("total_position_size"))+": "+e._s(e._f("Number")(e.total_posiion_size,0)))]),t("li",[e._v(" "+e._s(e.$t("total_unrealized_pnl"))+": "),t("span",{class:e.color(e.unrealized)},[e._v(" "+e._s(e._f("Number")(e.unrealized,0))+" ("+e._s(e._f("Precentage")(e.unrealized/e.total_initial_size,1))+") ")])])])]),t("div",{staticStyle:{display:"flex","justify-content":"space-between","padding-bottom":"5px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.keywords,expression:"keywords"}],attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.keywords},on:{input:function(t){t.target.composing||(e.keywords=t.target.value)}}}),t("export-table",{attrs:{table_id:"position-table"}})],1),t("table",{attrs:{id:"position-table"}},[t("tr",[t("th",{on:{click:function(t){return e.change_sortkey("symbol")}}},[e._v(" "+e._s(e.sorted_icon("symbol"))+e._s(e.$t("symbol"))+" ")]),t("th",{on:{click:function(t){return e.change_sortkey("markPrice")}}},[e._v(" "+e._s(e.sorted_icon("markPrice"))+e._s(e.$t("mark_price"))+" ")]),t("th",{on:{click:function(t){return e.change_sortkey("initial_size")}}},[e._v(" "+e._s(e.sorted_icon("initial_size"))+e._s(e.$t("initial_size"))+" ")]),t("th",{on:{click:function(t){return e.change_sortkey("unRealizedProfit")}}},[e._v(" "+e._s(e.sorted_icon("unRealizedProfit"))+e._s(e.$t("unrealized_pnl"))+" ")]),t("th",{on:{click:function(t){return e.change_sortkey("pnl_return")}}},[e._v(" "+e._s(e.sorted_icon("pnl_return"))+e._s(e.$t("pnl_return"))+" ")])]),e._l(e.sorted,(function(s){return t("tr",{key:s.symbol},[t("td",[e._v(e._s(s.symbol))]),t("td",[e._v(e._s(e._f("toPrecision")(s.markPrice,5)))]),t("td",[e._v(e._s(e._f("Number")(s.initial_size,0)))]),t("td",{class:e.color(s.unRealizedProfit)},[e._v(e._s(e._f("Number")(s.unRealizedProfit,1)))]),t("td",{class:e.color(s.unRealizedProfit)},[e._v(e._s(e._f("Precentage")(s.pnl_return,1)))])])}))],2)])},U=[],W=s("6bd8"),K=s.n(W),Y={name:"PositionView",props:{positions:Array},components:{ExportTable:R},data(){return{keywords:"",sort_key:"unRealizedProfit",sort_order:!0}},filters:$,computed:{sorted(){return f()(this.positions.map(e=>{const t=Math.abs(e.notional-e.unRealizedProfit);return{...e,initial_size:t,pnl_return:e.unRealizedProfit/t}}).filter(e=>0===this.keywords.length||e.symbol.includes(this.keywords.toUpperCase())),this.sort_key,this.sort_order?"desc":"asc")},unrealized(){return K()(this.positions,"unRealizedProfit")},total_initial_size(){return h()(this.positions.map(e=>Math.abs(e.notional-e.unRealizedProfit)))},total_posiion_size(){return h()(this.positions.map(e=>Math.abs(e.notional)))}},methods:{...O,sorted_icon(e){return e!==this.sort_key?"":this.sort_order?"↓":"↑"},change_sortkey(e){e===this.sort_key?this.sort_order=!this.sort_order:this.sort_key=e}},mounted(){}},q=Y,X=(s("e1c9"),Object(y["a"])(q,J,U,!1,null,"443413b7",null)),G=X.exports,H=function(){var e=this,t=e._self._c;return e.is_setting_mode?t("div",{staticClass:"modal",on:{click:function(t){return e.click("is_setting_mode")}}},[t("div",{staticClass:"modal-content",on:{click:e=>{e.stopImmediatePropagation()}}},[e._l(e.settingSwitchs,(function(s,a){return t("div",{key:a,staticClass:"setting-list"},[t("label",{staticClass:"switch"},[t("input",{attrs:{type:"checkbox"},domProps:{checked:e.getSettingValue(s.key)},on:{click:function(t){return e.click(s.key)}}}),t("span",{staticClass:"slider round"})]),t("span",[e._v(e._s(e.$t(s.label)))])])})),t("hr"),e._l(e.settingOptions,(function(s,a){return t("div",{key:a,staticClass:"setting-list"},[t("div",[e._v(e._s(e.$t(a))+":")]),e._l(s,(function(s){return t("button",{key:s.value,class:{"button-active":e.getSettingValue(a)===s.value},on:{click:function(t){return e.change_keyvalue(a,s.value)}}},[e._v(" "+e._s(s.label)+" ")])}))],2)})),t("div",{attrs:{id:"app-version"}},[e._v("app version: "+e._s(e.version))])],2)]):e._e()},Q=[],Z=s("9224"),ee={name:"Setting",components:{},props:{is_setting_mode:Boolean,is_hide_small_balance:Boolean,is_dark_mode:Boolean,is_perfer_return:Boolean,is_merge_wallets:Boolean,is_show_nav_title:Boolean,language:String,timeframe:String,asset_type:String},data(){return{version:Z["a"],settingSwitchs:[{key:"is_dark_mode",value:this.is_dark_mode,label:"dark_mode"},{key:"is_hide_small_balance",value:this.is_hide_small_balance,label:"hide_small_balance"},{key:"is_perfer_return",value:this.is_perfer_return,label:"show_return_in_small_device"},{key:"is_merge_wallets",value:this.is_merge_wallets,label:"is_merge_wallets"},{key:"is_show_nav_title",value:this.is_show_nav_title,label:"is_show_nav_title"}],settingOptions:{language:[{value:"en",label:"English"},{value:"zh",label:"Chinese"},{value:"jp",label:"Japanese"}],timeframe:[{value:"1d",label:"1d"},{value:"4d",label:"4d"},{value:"7d",label:"7d"},{value:"30d",label:"30d"}],asset_type:[{value:"all",label:"all"},{value:"crypto",label:"crypto"},{value:"stocks",label:"stocks"}]}}},methods:{getSettingValue(e){return this[e]},click(e){this.$emit("update:"+e,!this[e])},change_keyvalue(e,t){this.$emit("update:"+e,t)}}},te=ee,se=(s("13ad"),Object(y["a"])(te,H,Q,!1,null,"3f81f42c",null)),ae=se.exports,ie=function(){var e=this,t=e._self._c;return t("span",[e._v(e._s(e.$t("update_time"))+": "+e._s(e.lastUpdate))])},ne=[],oe=s("5a0c"),re=s.n(oe);re()().format();var le={name:"Timer",props:{time:Number},data(){return{now:Date.now()}},computed:{lastUpdate(){const e=(re()(this.now)-re()(this.time))/1e3;return`${e.toFixed(0)} ${this.$i18n.t("sec_ago")}`}},created:function(){setInterval(()=>{this.now=Date.now()},1e3)}},_e=le,ce=Object(y["a"])(_e,ie,ne,!1,null,null,null),de=ce.exports,ue=s("c707"),pe=s.n(ue),he=s("589b"),me=s("31cb"),fe=s("0829");Object(he["f"])(c["a"]),Object(me["a"])();const ve=Object(fe["d"])();var ge={name:"Main",components:{PieChart:k,AccountValue:B,PositionView:G,Setting:ae,Timer:de},props:{},data(){return{time:0,reported_total_cost:0,assets:[],positions:[],assets_table:[],price_map:{},price_history:[],userdata:{},daily_nav:[],saved:!1,screen_width:0,is_setting_mode:!1,is_exchange_chart:!1,is_nav_mode:!1,is_position_mode:!1,is_hide_small_balance:"true"===localStorage.is_hide_small_balance,is_dark_mode:"true"===localStorage.is_dark_mode,is_perfer_return:"true"===localStorage.is_perfer_return,is_merge_wallets:"true"===localStorage.is_merge_wallets,is_show_nav_title:"true"===localStorage.is_show_nav_title,language:localStorage.language||"en",timeframe:localStorage.timeframe||"1d",asset_type:localStorage.asset_type||"crypto",sort_key:"notional_value",sort_order:1}},computed:{title(){return this.is_show_nav_title?"$"+this.$options.filters.Number(this.nav,0):this.id.split(".")[0]+"'s Portfolio"},id(){const e=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)});return e.id},small_balance_threshold(){return.001*this.nav},nav(){return h()(this.assets_table.map(e=>e.size*e.price))},estimate_total_cost(){const e=h()(this.assets_table.map(e=>e.size*e.entry));return Math.max(e,this.reported_total_cost)},chart_data(){return this.is_exchange_chart?Object.values(this.assets_table.reduce((e,{wallet:t,notional_value:s})=>(e[t]={name:t,value:(e[t]?e[t].value:0)+s},e),{})):this.is_merge_wallets?Object.values(this.assets_table.reduce((e,{asset:t,notional_value:s})=>(e[t]={name:t,value:(e[t]?e[t].value:0)+s},e),{})):this.assets_table.map(e=>({name:e.asset,value:e.notional_value}))}},filters:$,methods:{...O,async save(){const e=Object(fe["b"])(ve,"config/"+this.id);await Object(fe["f"])(e,this.userdata),this.saved=!0,setTimeout(()=>{this.saved=!1},5e3)},pnl(e){const{asset:t,size:s,wallet:a}=e;return this.entry_p(t,a)&&this.price_map[t]?s*(this.price_map[t]-this.entry_p(t,a)):0},pnl_return(e){const{asset:t,wallet:s}=e;return this.entry_p(t,s)&&this.price_map[t]?this.price_map[t]/this.entry_p(t,s)-1:0},sum_pnl(e){return h()(e.map(({asset:e,size:t,price:s,wallet:a})=>this.entry_p(e,a)?t*(s-this.entry_p(e,a)):0))},today_pnl(){return this.daily_nav.length<2?0:this.nav-this.daily_nav[this.daily_nav.length-2][1]},tagcolor(e){const t=["#4059FB","#FF0000","#00EE00","#F1F605","#0EE5E4","#E65CA8","#757673","#F99700"];return{backgroundColor:t[e]}},should_show(e){return this.screen_width>500||(this.is_perfer_return?"pnl_return"===e:"pnl"===e)},sorted_icon(e){return e!==this.sort_key||2===this.sort_order?"":1===this.sort_order?"↓":"↑"},change_sortkey(e){e===this.sort_key?this.sort_order=(this.sort_order+1)%2:this.sort_key=e,this.update_assets_table()},change_tag(e){this.sort_order=2,void 0!==this.userdata[e]?(this.userdata[e]=(this.userdata[e]+1)%9,8==this.userdata[e]&&delete this.userdata[e]):this.$set(this.userdata,e,0)},assets_chages(e){if(0===this.price_history.length)return NaN;const t=parseInt(this.timeframe)+1,s=this.price_history.slice(-t)[0];return(this.price_map[e]-s[e])/s[e]},update_assets_table(){const e=["firstrade","ibkr"],t=this.assets.map(e=>({...e,tag:this.userdata[this.symbol_key(e.asset,e.wallet,"tag")],price:this.price_map[e.asset],price_changes:this.assets_chages(e.asset),notional_value:this.price_map[e.asset]*e.size,entry:this.entry_p(e.asset,e.wallet),pnl:this.pnl(e),pnl_return:this.pnl_return(e)})).filter(t=>"all"===this.asset_type||("stocks"===this.asset_type?e.includes(t.wallet):!e.includes(t.wallet)));this.assets_table=f()(t,this.sort_key,1===this.sort_order?"desc":"asc"),document.title=this.title},symbol_key(e,t,s){return"binance"!==t?`${e}-${t}-${s}`:`${e}-${s}`},entry_k(e,t){return"binance"!==t?`${e}-${t}`:""+e},entry_p(e,t){const s="binance"!==t?`${e}-${t}`:""+e;return this.userdata[s]||0},async loadData(){const e=Object(fe["b"])(ve,"config/"+this.id),t=Object(fe["b"])(ve,"nav/"+this.id),[s,a]=await Promise.all([Object(fe["c"])(e),Object(fe["c"])(t)]);s.exists()&&(this.userdata=s.data()),a.exists()&&(this.daily_nav=pe()(Object.entries(a.data()),e=>e[0])),this.update_assets_table()},subscribeToAssetChanges(){const e=Object(fe["b"])(ve,"asset/"+this.id);Object(fe["e"])(e,e=>{if(!e.exists())return;const{time:t,data:s,positions:a,estimate_total_cost:i}=e.data();this.time=t,this.reported_total_cost=i,this.assets=s,this.positions=a,this.update_assets_table()})},subscribeToPriceChanges(){const e=Object(fe["a"])(ve,"price/history/snapshots");Object(fe["e"])(e,e=>{if(e.empty)return void console.log("No snapshots found");const t={};e.forEach(e=>{t[e.id]=e.data()}),this.price_history=pe()(Object.entries(t),([e])=>e).map(([,e])=>e),this.price_map=this.price_history.slice(-1)[0],this.update_assets_table()})}},watch:{is_dark_mode:function(e){localStorage.is_dark_mode=e,document.documentElement.setAttribute("data-theme",e?"dark":"light")},is_hide_small_balance:function(e){localStorage.is_hide_small_balance=e},is_perfer_return:function(e){localStorage.is_perfer_return=e},is_merge_wallets:function(e){localStorage.is_merge_wallets=e},is_show_nav_title:function(e){localStorage.is_show_nav_title=e,document.title=this.title},language:function(e){localStorage.language=e,this.$i18n.locale=e},timeframe:async function(e){localStorage.timeframe=e,await this.loadData()},asset_type:function(e){localStorage.asset_type=e,this.update_assets_table()}},mounted(){this.screen_width=window.innerWidth>0?window.innerWidth:screen.width,document.documentElement.setAttribute("data-theme",this.is_dark_mode?"dark":"light")},created:async function(){this.$i18n.locale=this.language;try{await this.loadData(),this.subscribeToAssetChanges(),this.subscribeToPriceChanges()}catch(e){console.error("Error in created hook:",e)}}},be=ge,ye=(s("b1ef"),Object(y["a"])(be,l,_,!1,null,null,null)),we=ye.exports,ke={name:"App",components:{Main:we}},xe=ke,ze=Object(y["a"])(xe,o,r,!1,null,null,null),Se=ze.exports,Pe=s("9483");Object(Pe["a"])("/crypto-portfolio/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh."),window.location.reload()},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),a["default"].use(i["a"]),a["default"].use(n["a"]);const $e={en:s("e088"),zh:s("8066"),jp:s("3146")},Oe=new i["a"]({locale:"en",messages:$e});new a["default"]({i18n:Oe,render:e=>e(Se)}).$mount("#app")},"5d18":function(e,t,s){"use strict";s("7353")},7353:function(e,t,s){},8066:function(e){e.exports=JSON.parse('{"switch_chart":"切換圓餅圖視角","tag":"組","asset":"資產","wallet":"錢包","size":"量","price":"價","price_changes":"漲跌率","notional_value":"現值","entry":"入場價","pnl":"損益","pnl_return":"損益率","note":"備註","total_unrealized_pnl":"總未實現損益","today_pnl":"今日損益","today_pnl_error_msg":"今日損益只在顯示所有資產時有效","update_time":"更新時間","save":"儲存","saved":"已儲存！","sec_ago":"秒前","date":"日期","nav":"總資產","nav_page":"總資產走勢","diff":"日增減","estimate_total_cost":"預估總成本","export_as_csv":"匯出 CSV","7d":"7 日","30d":"30 日","90d":"90 日","180d":"180 日","365d":"365 日","all":"全歷史","positions_count":"持倉數量","symbol":"標的","position_notional":"價值","mark_price":"標記價格","initial_size":"初始價值","unrealized_pnl":"盈虧","total_initial_size":"總初始價值","total_position_size":"總價值","dark_mode":"深色模式","hide_small_balance":"隱藏小額資產 (小於 0.1% 總資產)","show_return_in_small_device":"在小螢幕裝置上顯示損益率","is_merge_wallets":"在圓餅圖顯示總和幣種資產","is_show_nav_title":"在網頁標題顯示總資產","language":"切換語言","timeframe":"價格變化率使用時框","asset_type":"顯示的資產類型"}')},9224:function(e){e.exports=JSON.parse('{"a":"1.5.3"}')},b1ef:function(e,t,s){"use strict";s("e677")},be6f:function(e){e.exports=JSON.parse('{"a":{"apiKey":"AIzaSyAiOeRX2NENGgKbW0VVQ4xR0gbPuyKJ5Ks","authDomain":"binance-portfolio-153c4.firebaseapp.com","projectId":"binance-portfolio-153c4","storageBucket":"binance-portfolio-153c4.appspot.com","messagingSenderId":"694089558371","appId":"1:694089558371:web:4e512f91c263ca77ad4b56","measurementId":"G-VT35JJGKW4"}}')},c392:function(e,t,s){},e088:function(e){e.exports=JSON.parse('{"switch_chart":"Switch Chart View","tag":"Tag","asset":"Token","wallet":"Wallet","size":"Size","price":"Price","price_changes":"Chg%","notional_value":"Value","entry":"Entry","pnl":"PnL","pnl_return":"Return","note":"Note","total_unrealized_pnl":"Total Unrealized PnL","today_pnl":"Today PnL","today_pnl_error_msg":"PnL only valid when showing all asset type","update_time":"Update Time","save":"Save","saved":"Done !","sec_ago":"sec ago","date":"Date","nav":"Net Account Value","nav_page":"Net Account Value","diff":"Daily PnL","estimate_total_cost":"Estimated Total Cost","export_as_csv":"Export as CSV","7d":"7d","30d":"30d","90d":"90d","180d":"180d","365d":"365d","all":"ALL","positions_count":"Number of Positions","symbol":"Symbol","position_notional":"Value","mark_price":"Mark Price","initial_size":"Initial Size","unrealized_pnl":"PnL","total_initial_size":"Total Initial Size","total_position_size":"Total Position Size","dark_mode":"Dark Mode","hide_small_balance":"Hide Small Balance (less than 0.1% NAV)","show_return_in_small_device":"Show Return(%) in Small Device","is_merge_wallets":"Merge Same Coins in Wallets in Pie Chart","is_show_nav_title":"Show NAV on tab title","language":"Change language","timeframe":"Time-frame used for price changes","asset_type":"Asset type to show"}')},e1c9:function(e,t,s){"use strict";s("0a3b")},e677:function(e,t,s){}});