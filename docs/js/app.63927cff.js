(function(e){function t(t){for(var s,r,o=t[0],l=t[1],c=t[2],u=0,d=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&d.push(n[r][0]),n[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);_&&_(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==n[l]&&(s=!1)}s&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var s={},n={app:0},i=[];function r(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=s,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(a,s,function(t){return e[t]}.bind(null,s));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/crypto-portfolio/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var _=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},13:function(e,t){},"1ba1":function(e,t,a){"use strict";a("99db")},2:function(e,t){},3:function(e,t){},3146:function(e){e.exports=JSON.parse('{"switch_chart":"チャート表示切り替え","tag":"タグ","asset":"トークン","wallet":"ウォレット","size":"サイズ","price":"価格","price_changes":"変化率%","notional_value":"価値","entry":"エントリー","pnl":"利益と損失","pnl_return":"リターン","note":"メモ","total_unrealized_pnl":"未実現損益合計","today_pnl":"今日の利益と損失","today_pnl_error_msg":"全てのアセットタイプが表示されている場合のみ有効な PnL です","update_time":"更新時刻","save":"保存","saved":"完了！","sec_ago":"秒前","date":"日付","nav":"純資産価値","nav_page":"純資産価値","diff":"日次利益と損失","estimate_total_cost":"総コスト見積り","export_as_csv":"CSV でエクスポート","dark_mode":"ダークモード","hide_small_balance":"小額残高を非表示 (純資産価値の 0.1% 未満）","show_return_in_small_device":"小型デバイスでリターン（%）を表示","is_merge_wallets":"パイチャートで同じコインのウォレットを統合する","is_show_nav_title":"「総資産」をウェブページのタイトルに表示する","language":"言語切り替え","timeframe":"価格変動に使用される時間枠","asset_type":"表示するアセットタイプ"}')},3385:function(e,t,a){"use strict";a("e15a")},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),n=a("a925"),i=a("003c"),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("Main")],1)},o=[],l=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"main"}},[t("div",{attrs:{id:"quick-access"}},[t("button",{staticClass:"btn setting-btn",on:{click:function(t){e.is_setting_mode=!e.is_setting_mode}}},[t("i",{staticClass:"fas fa-cog"})]),t("button",{directives:[{name:"show",rawName:"v-show",value:!e.is_nav_mode,expression:"!is_nav_mode"}],staticClass:"btn setting-btn",on:{click:function(t){e.is_exchange_chart=!e.is_exchange_chart}}},[e._v(" "+e._s(e.$t("switch_chart"))+" ")]),t("button",{staticClass:"btn setting-btn",on:{click:function(t){e.is_nav_mode=!e.is_nav_mode}}},[t("i",{staticClass:"fas fa-chart-line"})])]),t("setting",{attrs:{is_setting_mode:e.is_setting_mode,is_dark_mode:e.is_dark_mode,is_hide_small_balance:e.is_hide_small_balance,is_perfer_return:e.is_perfer_return,is_merge_wallets:e.is_merge_wallets,is_show_nav_title:e.is_show_nav_title,language:e.language,timeframe:e.timeframe,asset_type:e.asset_type},on:{"update:is_setting_mode":function(t){e.is_setting_mode=t},"update:is_dark_mode":function(t){e.is_dark_mode=t},"update:is_hide_small_balance":function(t){e.is_hide_small_balance=t},"update:is_perfer_return":function(t){e.is_perfer_return=t},"update:is_merge_wallets":function(t){e.is_merge_wallets=t},"update:is_show_nav_title":function(t){e.is_show_nav_title=t},"update:language":function(t){e.language=t},"update:timeframe":function(t){e.timeframe=t},"update:asset_type":function(t){e.asset_type=t}}}),e.is_nav_mode?t("account-value",{attrs:{daily_nav:e.daily_nav,estimate_total_cost:e.estimate_total_cost}}):e._e(),e.is_nav_mode?e._e():t("div",[t("pie-chart",{attrs:{assets:e.chart_data}}),t("ul",e._l(e.assets,(function(a){return t("li",{directives:[{name:"show",rawName:"v-show",value:"APP_ERROR"==a.asset,expression:"asset.asset == 'APP_ERROR'"}],key:a.asset+a.wallet,staticClass:"sell"},[e._v(" "+e._s(a.wallet)+" KEY ERROR ")])})),0),t("table",{attrs:{id:"asset"}},[t("tr",[e.should_show("tag")?t("th",{on:{click:function(t){return e.change_sortkey("tag")}}},[e._v(" "+e._s(e.sorted_icon("tag"))+e._s(e.$t("tag"))+" ")]):e._e(),e.should_show("wallet")?t("th",{on:{click:function(t){return e.change_sortkey("wallet")}}},[e._v(" "+e._s(e.sorted_icon("wallet"))+e._s(e.$t("wallet"))+" ")]):e._e(),t("th",{on:{click:function(t){return e.change_sortkey("asset")}}},[e._v(" "+e._s(e.sorted_icon("asset"))+e._s(e.$t("asset"))+" ")]),e.should_show("price_changes")?t("th",{on:{click:function(t){return e.change_sortkey("price_changes")}}},[e._v(" "+e._s(e.sorted_icon("price_changes"))+e._s(e.timeframe)+" "+e._s(e.$t("price_changes"))+" ")]):e._e(),t("th",{on:{click:function(t){return e.change_sortkey("price")}}},[e._v(" "+e._s(e.sorted_icon("price"))+e._s(e.$t("price"))+" ")]),t("th",{on:{click:function(t){return e.change_sortkey("entry")}}},[e._v(" "+e._s(e.sorted_icon("entry"))+e._s(e.$t("entry"))+" ")]),t("th",{on:{click:function(t){return e.change_sortkey("size")}}},[e._v(" "+e._s(e.sorted_icon("size"))+e._s(e.$t("size"))+" ")]),t("th",{on:{click:function(t){return e.change_sortkey("notional_value")}}},[e._v(" "+e._s(e.sorted_icon("notional_value"))+e._s(e.$t("notional_value"))+" ")]),e.should_show("pnl")?t("th",{on:{click:function(t){return e.change_sortkey("pnl")}}},[e._v(" "+e._s(e.sorted_icon("pnl"))+e._s(e.$t("pnl"))+" ")]):e._e(),e.should_show("pnl_return")?t("th",{on:{click:function(t){return e.change_sortkey("pnl_return")}}},[e._v(" "+e._s(e.sorted_icon("pnl_return"))+e._s(e.$t("pnl_return"))+" ")]):e._e(),e.screen_width>500?t("th",[e._v(e._s(e.$t("note")))]):e._e()]),e._l(e.assets_table,(function(a){return t("tr",{directives:[{name:"show",rawName:"v-show",value:"APP_ERROR"!=a.asset&&(!e.is_hide_small_balance||a.size*a.price>e.small_balance_threshold),expression:"asset.asset != 'APP_ERROR' && (!is_hide_small_balance || asset.size * asset.price > small_balance_threshold)"}],key:a.asset+a.wallet},[e.should_show("tag")?t("td",{staticClass:"btn-tag",style:e.tagcolor(e.userdata[e.symbol_key(a.asset,a.wallet,"tag")]),on:{click:function(t){e.change_tag(e.symbol_key(a.asset,a.wallet,"tag"))}}},[e._v(" "+e._s(void 0!==e.userdata[e.symbol_key(a.asset,a.wallet,"tag")]?e.userdata[e.symbol_key(a.asset,a.wallet,"tag")]+1:"")+" ")]):e._e(),e.should_show("wallet")?t("td",[e._v(e._s(a.wallet))]):e._e(),t("td",[e._v(e._s(a.asset))]),e.should_show("price_changes")?t("td",{class:e.color(a.price_changes),staticStyle:{width:"0px"}},[e._v(" "+e._s(e._f("Precentage")(a.price_changes,1))+" ")]):e._e(),t("td",[e._v(e._s(e._f("toPrecision")(a.price,5)))]),t("td",{staticClass:"entry-price"},[t("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.userdata[e.entry_k(a.asset,a.wallet)],expression:"userdata[entry_k(asset.asset, asset.wallet)]",modifiers:{lazy:!0}}],attrs:{type:"number"},domProps:{value:e.userdata[e.entry_k(a.asset,a.wallet)]},on:{change:function(t){e.$set(e.userdata,e.entry_k(a.asset,a.wallet),t.target.value)}}})]),t("td",{directives:[{name:"tooltip",rawName:"v-tooltip",value:a.size.toString(),expression:"asset.size.toString()"}]},[e._v(" "+e._s(e._f("nFormatter")(a.size,3))+" ")]),t("td",[e._v(e._s(e._f("Number")(a.notional_value,0)))]),e.should_show("pnl")?t("td",{class:e.color(a.pnl)},[e._v(" "+e._s(e._f("Number")(a.pnl,0))+" ")]):e._e(),e.should_show("pnl_return")?t("td",{class:e.color(a.pnl)},[e._v(" "+e._s(e._f("Precentage")(a.pnl_return,1))+" ")]):e._e(),e.screen_width>500?t("td",{staticClass:"entry-price",staticStyle:{"max-width":"200px"}},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.userdata[e.symbol_key(a.asset,a.wallet,"note")],expression:"userdata[symbol_key(asset.asset, asset.wallet, 'note')]"}],domProps:{value:e.userdata[e.symbol_key(a.asset,a.wallet,"note")]},on:{input:function(t){t.target.composing||e.$set(e.userdata,e.symbol_key(a.asset,a.wallet,"note"),t.target.value)}}})]):e._e()])}))],2),t("footer",{staticStyle:{display:"flex","justify-content":"space-between"}},[t("ul",{staticStyle:{"list-style":"none","padding-left":"0"}},[t("li",[e._v(" "+e._s(e.$t("total_unrealized_pnl"))+": "),t("span",{class:e.color(e.sum_pnl(e.assets_table))},[e._v(" "+e._s(e._f("Number")(e.sum_pnl(e.assets_table),0))+" ")])]),t("li",[e._v(" "+e._s(e.$t("today_pnl"))+": "),"all"===e.asset_type?t("span",{class:e.color(e.today_pnl())},[e._v(" "+e._s(e._f("Number")(e.today_pnl(),0))+" ")]):e._e(),"all"!==e.asset_type?t("span",[e._v(" "+e._s(e.$t("today_pnl_error_msg"))+" ")]):e._e()]),t("li",[e._v(" "+e._s(e.$t("estimate_total_cost"))+": "),t("span",[e._v(" "+e._s(e._f("Number")(e.estimate_total_cost,0))+" ")])]),t("li",[t("Timer",{attrs:{time:e.time}})],1)]),t("button",{staticClass:"save",on:{click:e.save}},[e._v(" "+e._s(e.saved?e.$t("saved"):e.$t("save"))+" ")])])],1)],1)},c=[],_=(a("88a7"),a("271a"),a("5494"),a("13d5"),a("5716"),a("be6f")),u=function(){var e=this,t=e._self._c;return t("highcharts",{staticStyle:{height:"400px",width:"500"},attrs:{id:"pie",options:e.chartOptions}})},d=[],h=a("d180"),p=a.n(h),m=a("93c6"),f=a.n(m),g=a("4452"),v={name:"PieChart",props:{assets:Array},components:{highcharts:g["Chart"]},data(){return{dragging:!1,chart_size:null,startAngle:0,startAngleOffset:0}},computed:{nav:function(){return p()(this.assets.map(({value:e})=>e))},chartOptions:function(){return{chart:{type:"pie",animation:!1},plotOptions:{pie:{size:"80%",innerSize:"80%",dataLabels:{distance:"2%",alignTo:"toPlotEdges",filter:{property:"percentage",operator:">",value:5},overflow:"allow",crop:!0}},series:{animation:{duration:500}}},title:{verticalAlign:"middle",floating:!0,text:"Total<br>$"+new Intl.NumberFormat("en-US",{maximumFractionDigits:0,minimumFractionDigits:0}).format(this.nav)},tooltip:{pointFormat:"<b>{point.percentage:.1f}%</b><br><b>${point.y:.0f}</b>"},series:[{name:"",colorByPoint:!0,startAngle:this.startAngle,data:f()(this.assets,"value","desc").map(e=>[e.name,e.value])}]}}},methods:{getDegree(e){const t=e.offsetX?e.offsetX:e.touches[0].clientX,a=e.offsetY?e.offsetY:e.touches[0].clientY,[s,n]=this.chart_size,i=[s/2-t,n/2-a],r=Math.atan2(i[1],i[0]);return 57.29*r%360},startDrag(e){this.dragging=!0;const t=this.getDegree(e);this.startAngleOffset=this.startAngle-t},stopDrag(){this.dragging=!1},doDrag(e){if(this.dragging){const t=this.getDegree(e);this.startAngle=t+this.startAngleOffset}e.preventDefault(),e.stopImmediatePropagation()}},mounted(){const e=document.getElementById("pie");this.chart_size=[e.offsetWidth,e.offsetHeight],window.addEventListener("touchend",this.stopDrag,{passive:!1}),window.addEventListener("mouseup",this.stopDrag,{passive:!1}),e.addEventListener("mousedown",this.startDrag,{passive:!1}),e.addEventListener("mousemove",this.doDrag,{passive:!1}),e.addEventListener("touchstart",this.startDrag,{passive:!1}),e.addEventListener("touchmove",this.doDrag,{passive:!1})}},b=v,y=a("2877"),w=Object(y["a"])(b,u,d,!1,null,"25e3feab",null),k=w.exports,x=function(){var e=this,t=e._self._c;return t("div",[t("highcharts",{staticStyle:{height:"300px",width:"500"},attrs:{id:"account-nav",options:e.chartOptions}}),t("div",{staticClass:"flex-container"},[t("div",[t("button",{class:{selected:7===e.timeframe},on:{click:function(t){return e.pick_range(7)}}},[e._v(" 7d ")]),t("button",{class:{selected:30===e.timeframe},on:{click:function(t){return e.pick_range(30)}}},[e._v(" 30d ")]),t("button",{class:{selected:90===e.timeframe},on:{click:function(t){return e.pick_range(90)}}},[e._v(" 90d ")]),t("button",{class:{selected:180===e.timeframe},on:{click:function(t){return e.pick_range(180)}}},[e._v(" 180d ")]),t("button",{class:{selected:void 0===e.timeframe},on:{click:function(t){return e.pick_range(void 0)}}},[e._v(" ALL ")])]),t("export-table",{attrs:{table_id:"nav-table"}})],1),t("table",{attrs:{id:"nav-table"}},[t("tr",[t("th",[e._v(e._s(e.$t("date")))]),t("th",[e._v(e._s(e.$t("nav")))]),t("th",[e._v(e._s(e.$t("diff")))])]),e._l(e.reversed_data,(function(a,s){return t("tr",{key:a[0]},[t("td",[e._v(e._s(a[0]))]),t("td",[e._v("$ "+e._s(e._f("Number")(a[1],0)))]),t("td",{class:e.color(e.dail_pnl(s))},[e._v(" "+e._s(e._f("Number")(e.dail_pnl(s),0))+" ")])])}))],2)],1)},S=[],$=(a("14d9"),a("5cd2")),O=a.n($);async function P(e,t,a){const s=new O.a,n=new Set((await s.exchangeInfo()).symbols.map(e=>e.symbol));for(const r of e)if(~["USDT","USD"].indexOf(r))a[r]=0;else for(const e of["USDT","BTC","BNB"]){const o=`${r}${e}`;if(n.has(o))try{const e=await s.candles({symbol:o,interval:t,limit:2});a[r]=(parseFloat(e[1].close)-parseFloat(e[0].open))/parseFloat(e[0].open);break}catch(i){continue}}return a}const j={"30m":"30min","4h":"4hour","1d":"1day","1w":"1week"};async function A(e,t,a){for(const s of e){if("number"===typeof a[s])continue;const e=`period=${j[t]}&symbol=${s.toLowerCase()}usdt&size=2`,n=await(await fetch("https://api.huobi.pro/market/history/kline?"+e)).json();if("ok"!==n.status||n.data.length<2)continue;const i=n.data.reverse();a[s]=(i[1].close-i[0].open)/i[0].open}return a}async function C(e,t){e=[...new Set(e)];const a=await P(e,t,{}),s=await A(e,t,a);return s}function N(e,t=","){const a=document.querySelectorAll("table#"+e+" tr"),s=[];for(let o=0;o<a.length;o++){const e=[],n=a[o].querySelectorAll("td, th");for(let t=0;t<n.length;t++){let a=n[t].innerText.replace(/(\r\n|\n|\r)/gm,"").replace(/(\s\s)/gm," ");a=a.replace(/"/g,'""'),a=a.replace(/[,$]/g,""),e.push('"'+a+'"')}s.push(e.join(t))}const n=s.join("\n"),i=e+"_"+(new Date).getTime()+".csv",r=document.createElement("a");r.style.display="none",r.setAttribute("target","_blank"),r.setAttribute("href","data:text/csv;charset=utf-8,"+encodeURIComponent(n)),r.setAttribute("download",i),document.body.appendChild(r),r.click(),document.body.removeChild(r)}function z(e){const t=Math.abs(e)>999?Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)+"k":Math.sign(e)*Math.abs(e);return"$ "+t}var D=function(){var e=this,t=e._self._c;return t("button",{on:{click:e.download}},[e._v(e._s(e.$t("export_as_csv")))])},F=[],E={name:"ExportTable",props:{table_id:String},computed:{},methods:{download(){N(this.table_id)}},mounted(){}},T=E,R=Object(y["a"])(T,D,F,!1,null,"6ccc5614",null),M=R.exports,L=a("80f6"),V=a.n(L),B=a("1723"),I=a.n(B),U={name:"AccountValue",props:{daily_nav:Array,estimate_total_cost:Number},components:{highcharts:g["Chart"],ExportTable:M},data(){return{timeframe:30}},filters:{Number:(e,t)=>{if(void 0==e)return 0;const a="number"===typeof t?{maximumFractionDigits:t,minimumFractionDigits:t}:{};return new Intl.NumberFormat("en-US",a).format(e)}},computed:{reversed_data:function(){return this.daily_nav.slice().reverse().slice(0,this.timeframe)},chartOptions:function(){return{chart:{type:"area",animation:!1},legend:{enabled:!1},title:{text:this.$i18n.t("nav_page")},plotOptions:{areaspline:{threshold:null},series:{animation:{duration:500},marker:{radius:0},fillOpacity:0,dataLabels:{enabled:!0,verticalAlign:"top",y:-20,formatter:function(){if(this.y===this.series.dataMax)return z(this.y)}}}},xAxis:{type:"datetime",dateTimeLabelFormats:{day:"%d %b %Y"},labels:{rotation:0,format:"{value:%m-%d}"}},yAxis:{min:V()(this.reversed_data,e=>e[1])[1],max:I()(this.reversed_data,e=>e[1])[1],title:{enabled:!1},labels:{formatter:function(){return z(this.value)},style:{fontSize:9}}},tooltip:{pointFormat:"<b>${point.y:.0f}</b>"},series:[{name:this.$i18n.t("nav"),background:"#00f",fillOpacity:.3,data:this.daily_nav.map(e=>{const[t,a,s]=e[0].split("-");return[Date.UTC(t,+a-1,s),e[1]]}).slice(-this.timeframe)}]}}},methods:{dail_pnl(e){return this.reversed_data[e][1]-this.reversed_data[Math.min(e+1,this.reversed_data.length-1)][1]},color(e){return{buy:e>0,sell:e<0}},pick_range(e){this.timeframe=e}},mounted(){}},J=U,W=(a("1ba1"),a("d9c5"),Object(y["a"])(J,x,S,!1,null,"7cb904b0",null)),K=W.exports,Y=function(){var e=this,t=e._self._c;return e.is_setting_mode?t("div",{staticClass:"modal",on:{click:function(t){return e.click("is_setting_mode")}}},[t("div",{staticClass:"modal-content",on:{click:e=>{e.stopImmediatePropagation()}}},[e._l(e.settingSwitchs,(function(a,s){return t("div",{key:s,staticClass:"setting-list"},[t("label",{staticClass:"switch"},[t("input",{attrs:{type:"checkbox"},domProps:{checked:e.getSettingValue(a.key)},on:{click:function(t){return e.click(a.key)}}}),t("span",{staticClass:"slider round"})]),t("span",[e._v(e._s(e.$t(a.label)))])])})),t("hr"),e._l(e.settingOptions,(function(a,s){return t("div",{key:s,staticClass:"setting-list"},[t("div",[e._v(e._s(e.$t(s))+":")]),e._l(a,(function(a){return t("button",{key:a.value,class:{"button-active":e.getSettingValue(s)===a.value},on:{click:function(t){return e.change_keyvalue(s,a.value)}}},[e._v(" "+e._s(a.label)+" ")])}))],2)}))],2)]):e._e()},q=[],X={name:"Setting",components:{},props:{is_setting_mode:Boolean,is_hide_small_balance:Boolean,is_dark_mode:Boolean,is_perfer_return:Boolean,is_merge_wallets:Boolean,is_show_nav_title:Boolean,language:String,timeframe:String,asset_type:String},data(){return{settingSwitchs:[{key:"is_dark_mode",value:this.is_dark_mode,label:"dark_mode"},{key:"is_hide_small_balance",value:this.is_hide_small_balance,label:"hide_small_balance"},{key:"is_perfer_return",value:this.is_perfer_return,label:"show_return_in_small_device"},{key:"is_merge_wallets",value:this.is_merge_wallets,label:"is_merge_wallets"},{key:"is_show_nav_title",value:this.is_show_nav_title,label:"is_show_nav_title"}],settingOptions:{language:[{value:"en",label:"English"},{value:"zh",label:"Chinese"},{value:"jp",label:"Japanese"}],timeframe:[{value:"30m",label:"30m"},{value:"4h",label:"4h"},{value:"1d",label:"1d"},{value:"1w",label:"1w"}],asset_type:[{value:"all",label:"all"},{value:"crypto",label:"crypto"},{value:"stocks",label:"stocks"}]}}},methods:{getSettingValue(e){return this[e]},click(e){this.$emit("update:"+e,!this[e])},change_keyvalue(e,t){this.$emit("update:"+e,t)}}},G=X,H=(a("3385"),Object(y["a"])(G,Y,q,!1,null,"3d5ae2e9",null)),Q=H.exports,Z=function(){var e=this,t=e._self._c;return t("span",[e._v(e._s(e.$t("update_time"))+": "+e._s(e.lastUpdate))])},ee=[],te=a("5a0c"),ae=a.n(te);ae()().format();var se={name:"Timer",props:{time:Number},data(){return{now:Date.now()}},computed:{lastUpdate(){const e=(ae()(this.now)-ae()(this.time))/1e3;return`${e.toFixed(0)} ${this.$i18n.t("sec_ago")}`}},created:function(){setInterval(()=>{this.now=Date.now()},1e3)}},ne=se,ie=Object(y["a"])(ne,Z,ee,!1,null,null,null),re=ie.exports,oe=a("c707"),le=a.n(oe),ce=a("589b"),_e=a("31cb"),ue=a("0829");Object(ce["f"])(_["a"]),Object(_e["a"])();const de=Object(ue["c"])();var he={name:"Main",components:{PieChart:k,AccountValue:K,Setting:Q,Timer:re},props:{},data(){return{time:0,reported_total_cost:0,assets:[],assets_table:[],assets_chages:{},price_map:{},userdata:{},daily_nav:[],saved:!1,screen_width:0,is_setting_mode:!1,is_exchange_chart:!1,is_nav_mode:!1,is_hide_small_balance:"true"===localStorage.is_hide_small_balance,is_dark_mode:"true"===localStorage.is_dark_mode,is_perfer_return:"true"===localStorage.is_perfer_return,is_merge_wallets:"true"===localStorage.is_merge_wallets,is_show_nav_title:"true"===localStorage.is_show_nav_title,language:localStorage.language||"en",timeframe:localStorage.timeframe||"1d",asset_type:localStorage.asset_type||"crypto",sort_key:"notional_value",sort_order:1}},computed:{title(){return this.is_show_nav_title?"$"+this.$options.filters.Number(this.nav,0):this.id.split(".")[0]+"'s Portfolio"},id(){const e=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)});return e.id||window.location.host},small_balance_threshold(){return.001*this.nav},nav(){return p()(this.assets_table.map(e=>e.size*e.price))},estimate_total_cost(){const e=p()(this.assets_table.map(e=>e.size*e.entry));return Math.max(e,this.reported_total_cost)},chart_data(){return this.is_exchange_chart?Object.values(this.assets_table.reduce((e,{wallet:t,notional_value:a})=>(e[t]={name:t,value:(e[t]?e[t].value:0)+a},e),{})):this.is_merge_wallets?Object.values(this.assets_table.reduce((e,{asset:t,notional_value:a})=>(e[t]={name:t,value:(e[t]?e[t].value:0)+a},e),{})):this.assets_table.map(e=>({name:e.asset,value:e.notional_value}))}},filters:{toFixed:(e,t=2)=>void 0==e?0:e.toFixed(t),toPrecision:(e,t)=>void 0==e||Math.abs(e)<1e-8?0:e.toPrecision(t),Number:(e,t)=>{if(void 0==e)return 0;const a="number"===typeof t?{maximumFractionDigits:t,minimumFractionDigits:t}:{};return new Intl.NumberFormat("en-US",a).format(e)},Precentage:(e,t=1)=>e===1/0?"Inf%":isNaN(e)?"--":(100*e||0).toFixed(t)+"%",nFormatter:(e,t)=>{const a=[{value:1e3,symbol:"k"},{value:1e6,symbol:"M"},{value:1e8,symbol:"B"}],s=/\.0+$|(\.[0-9]*[1-9])0+$/,n=a.slice().reverse().find((function(t){return e>=t.value}));return n?(e/n.value).toFixed(t-1).replace(s,"$1")+n.symbol:e.toFixed(t)}},methods:{async save(){const e=Object(ue["a"])(de,"config/"+this.id);await Object(ue["e"])(e,this.userdata),this.saved=!0,setTimeout(()=>{this.saved=!1},5e3)},pnl(e){const{asset:t,size:a,wallet:s}=e;return this.entry_p(t,s)&&this.price_map[t]?a*(this.price_map[t]-this.entry_p(t,s)):0},pnl_return(e){const{asset:t,wallet:a}=e;return this.entry_p(t,a)&&this.price_map[t]?this.price_map[t]/this.entry_p(t,a)-1:0},sum_pnl(e){return p()(e.map(({asset:e,size:t,price:a,wallet:s})=>this.entry_p(e,s)?t*(a-this.entry_p(e,s)):0))},today_pnl(){return this.daily_nav.length<2?0:this.nav-this.daily_nav[this.daily_nav.length-2][1]},tagcolor(e){const t=["#4059FB","#FF0000","#00EE00","#F1F605","#0EE5E4","#E65CA8","#757673","#F99700"];return{backgroundColor:t[e]}},color(e){return{buy:e>0,sell:e<0}},should_show(e){return this.screen_width>500||(this.is_perfer_return?"pnl_return"===e:"pnl"===e)},sorted_icon(e){return e!==this.sort_key||2===this.sort_order?"":1===this.sort_order?"↓":"↑"},change_sortkey(e){e===this.sort_key?this.sort_order=(this.sort_order+1)%2:this.sort_key=e,this.update_assets_table()},change_tag(e){this.sort_order=2,void 0!==this.userdata[e]?(this.userdata[e]=(this.userdata[e]+1)%9,8==this.userdata[e]&&delete this.userdata[e]):this.$set(this.userdata,e,0)},update_assets_table(){const e=this.assets.map(e=>({...e,tag:this.userdata[this.symbol_key(e.asset,e.wallet,"tag")],price:this.price_map[e.asset],price_changes:this.assets_chages[e.asset]||e.changepercent,notional_value:this.price_map[e.asset]*e.size,entry:this.entry_p(e.asset,e.wallet),pnl:this.pnl(e),pnl_return:this.pnl_return(e)})).filter(e=>"all"===this.asset_type||("stocks"===this.asset_type?"firstrade"===e.wallet:"firstrade"!==e.wallet));this.assets_table=f()(e,this.sort_key,1===this.sort_order?"desc":"asc"),document.title=this.title},symbol_key(e,t,a){return"binance"!==t?`${e}-${t}-${a}`:`${e}-${a}`},entry_k(e,t){return"binance"!==t?`${e}-${t}`:""+e},entry_p(e,t){const a="binance"!==t?`${e}-${t}`:""+e;return this.userdata[a]||0}},watch:{is_dark_mode:function(e){localStorage.is_dark_mode=e,document.documentElement.setAttribute("data-theme",e?"dark":"light")},is_hide_small_balance:function(e){localStorage.is_hide_small_balance=e},is_perfer_return:function(e){localStorage.is_perfer_return=e},is_merge_wallets:function(e){localStorage.is_merge_wallets=e},is_show_nav_title:function(e){localStorage.is_show_nav_title=e,document.title=this.title},language:function(e){localStorage.language=e,this.$i18n.locale=e},timeframe:async function(e){localStorage.timeframe=e;const t=this.assets.filter(e=>"firstrade"!==e.wallet).map(e=>e.asset);this.assets_chages=await C(t,this.timeframe),this.update_assets_table()},asset_type:function(e){localStorage.asset_type=e,this.update_assets_table()}},mounted(){this.screen_width=window.innerWidth>0?window.innerWidth:screen.width,document.documentElement.setAttribute("data-theme",this.is_dark_mode?"dark":"light")},created:async function(){this.$i18n.locale=this.language;const e=Object(ue["a"])(de,"config/"+this.id),t=await Object(ue["b"])(e);t.exists()&&(this.userdata=t.data(),this.update_assets_table());const a=Object(ue["a"])(de,"asset/"+this.id);Object(ue["d"])(a,async e=>{if(!e.exists())return;const{time:t,data:a,estimate_total_cost:s}=e.data();this.time=t,this.reported_total_cost=s,this.assets=a,this.update_assets_table()});const s=Object(ue["a"])(de,"price/spot");Object(ue["d"])(s,async e=>{if(!e.exists())return;this.price_map=e.data(),this.update_assets_table();const t=this.assets.filter(e=>"firstrade"!==e.wallet).map(e=>e.asset);this.should_show("price_changes")&&(this.assets_chages=await C(t,this.timeframe)),this.update_assets_table()});const n=Object(ue["a"])(de,"nav/"+this.id),i=await Object(ue["b"])(n);i.exists()&&(this.daily_nav=le()(Object.entries(i.data()),e=>e[0]))}},pe=he,me=(a("96b2"),Object(y["a"])(pe,l,c,!1,null,null,null)),fe=me.exports,ge={name:"App",components:{Main:fe}},ve=ge,be=Object(y["a"])(ve,r,o,!1,null,null,null),ye=be.exports,we=a("9483");Object(we["a"])("/crypto-portfolio/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh."),window.location.reload()},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}}),s["default"].use(n["a"]),s["default"].use(i["a"]);const ke={en:a("e088"),zh:a("8066"),jp:a("3146")},xe=new n["a"]({locale:"en",messages:ke});new s["default"]({i18n:xe,render:e=>e(ye)}).$mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},8066:function(e){e.exports=JSON.parse('{"switch_chart":"切換圓餅圖視角","tag":"組","asset":"資產","wallet":"錢包","size":"量","price":"價","price_changes":"漲跌率","notional_value":"現值","entry":"入場價","pnl":"損益","pnl_return":"損益率","note":"備註","total_unrealized_pnl":"總未實現損益","today_pnl":"今日損益","today_pnl_error_msg":"今日損益只在顯示所有資產時有效","update_time":"更新時間","save":"儲存","saved":"已儲存！","sec_ago":"秒前","date":"日期","nav":"總資產","nav_page":"總資產走勢","diff":"日增減","estimate_total_cost":"預估總成本","export_as_csv":"匯出 CSV","dark_mode":"深色模式","hide_small_balance":"隱藏小額資產 (小於 0.1% 總資產)","show_return_in_small_device":"在小螢幕裝置上顯示損益率","is_merge_wallets":"在圓餅圖顯示總和幣種資產","is_show_nav_title":"在網頁標題顯示總資產","language":"切換語言","timeframe":"價格變化率使用時框","asset_type":"顯示的資產類型"}')},9:function(e,t){},"96b2":function(e,t,a){"use strict";a("ec98")},"99db":function(e,t,a){},be6f:function(e){e.exports=JSON.parse('{"a":{"apiKey":"AIzaSyAiOeRX2NENGgKbW0VVQ4xR0gbPuyKJ5Ks","authDomain":"binance-portfolio-153c4.firebaseapp.com","projectId":"binance-portfolio-153c4","storageBucket":"binance-portfolio-153c4.appspot.com","messagingSenderId":"694089558371","appId":"1:694089558371:web:4e512f91c263ca77ad4b56","measurementId":"G-VT35JJGKW4"}}')},d2b4:function(e,t,a){},d9c5:function(e,t,a){"use strict";a("d2b4")},e088:function(e){e.exports=JSON.parse('{"switch_chart":"Switch Chart View","tag":"Tag","asset":"Token","wallet":"Wallet","size":"Size","price":"Price","price_changes":"Chg%","notional_value":"Value","entry":"Entry","pnl":"PnL","pnl_return":"Return","note":"Note","total_unrealized_pnl":"Total Unrealized PnL","today_pnl":"Today PnL","today_pnl_error_msg":"PnL only valid when showing all asset type","update_time":"Update Time","save":"Save","saved":"Done !","sec_ago":"sec ago","date":"Date","nav":"Net Account Value","nav_page":"Net Account Value","diff":"Daily PnL","estimate_total_cost":"Estimated Total Cost","export_as_csv":"Export as CSV","dark_mode":"Dark Mode","hide_small_balance":"Hide Small Balance (less than 0.1% NAV)","show_return_in_small_device":"Show Return(%) in Small Device","is_merge_wallets":"Merge Same Coins in Wallets in Pie Chart","is_show_nav_title":"Show NAV on tab title","language":"Change language","timeframe":"Time-frame used for price changes","asset_type":"Asset type to show"}')},e15a:function(e,t,a){},ec98:function(e,t,a){}});